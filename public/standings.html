<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Standings</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <nav class="nav">
        <a href="/index.html">Home</a>
        <a href="/tournaments.html">Tournaments</a>
        <a href="/standings.html">Standings</a>
        <a href="/login.html">Login</a>
    </nav>
    <hr>

    <h1>Tournament Standings</h1>

    <select id="tSelect"></select>
    <button onclick="loadStandings()">Load</button>

    <table border="1" cellpadding="6" style="margin-top:10px">
        <thead>
            <tr>
                <th>Team</th>
                <th>G</th>
                <th>W</th>
                <th>D</th>
                <th>L</th>
                <th>GF</th>
                <th>GA</th>
                <th>GD</th>
                <th>Pts</th>
            </tr>
        </thead>
        <tbody id="rows"></tbody>
    </table>

    <script>
        async function loadTournaments() {
            const res = await fetch('/api/tournaments');
            if (!res.ok) return alert('Login first');

            const data = await res.json();
            const sel = document.getElementById('tSelect');
            sel.innerHTML = '';

            data.forEach(t => {
                const o = document.createElement('option');
                o.value = t._id;
                o.textContent = t.name;
                sel.appendChild(o);
            });
        }

        async function loadStandings() {
            const id = document.getElementById('tSelect').value;
            if (!id) return;

            const res = await fetch(`/api/tournaments/${id}/standings`);
            const data = await res.json();

            const rows = document.getElementById('rows');
            rows.innerHTML = '';

            (data.standings || []).forEach(s => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
      <td>${s.teamName}</td>
      <td>${s.games}</td>
      <td>${s.wins}</td>
      <td>${s.draws}</td>
      <td>${s.losses}</td>
      <td>${s.goalsFor}</td>
      <td>${s.goalsAgainst}</td>
      <td>${s.goalDiff}</td>
      <td><b>${s.points}</b></td>
    `;
                rows.appendChild(tr);
            });
        }

        loadTournaments();
    </script>

</body>

</html>